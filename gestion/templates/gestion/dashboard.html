{% extends 'dashboard_skeleton.html' %}

{% block content %}
  <div  class="mt-6" x-cloak x-data="{ deleteURL: '' }">
    <div class="is-flex is-justify-content-space-between px-3">
      <h3 class="title">Menús</h3>
    </div>
    <section id="menu-cards">
      {% if menus %}
        <div class="columns is-multiline m-0" id="grid">
          {% for menu in menus %}
            <div class="column is-6 is-4-widescreen is-flex">
              <div class="card is-menu">
                <div class="card-header">
                  <h4 class="card-header-title title is-4">{{ menu.nombre }}</h4>
                </div>
                <div class="card-content">
                  {{ menu.descripcion }}
                </div>
                <div class="card-footer">
                  <div class="actions-container">
                    <a class="card-footer-item" href="{% url 'core:menu-detail' menu.codigo %}">
                      <ion-icon name="eye-outline" title="Previsualizar menú"></ion-icon>
                    </a>
                    <a class="card-footer-item" href="{% url 'gestion:editar-menu' menu.pk %}">
                      <ion-icon name="create-outline" title="Editar menú"></ion-icon>
                    </a>
                    <a class="card-footer-item" x-on:click="deleteURL = '{% url 'gestion:eliminar-menu' menu.pk %}'">
                      <ion-icon name="trash-outline" title="Eliminar menú"></ion-icon>
                    </a>
                    <div
                      x-show="deleteURL"
                      class="delete-menu-container"
                      x-on:keyup.window.escape="deleteURL = ''"
                      >
                      <form
                        class="delete-menu-form"
                        method="POST"
                        x-bind:action="deleteURL"
                      >
                        {% csrf_token %}
                        <p>Seguro que quieres eliminar el menú?</p>
                        <input
                          x-on:click="deleteURL = ''"
                          type="button"
                          value="Cancelar"
                          class="button"
                        />
                        <input type="submit" value="confirmar" class="button is-primary" />
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
          {% if menus|length <= max_menus %}
          <div class="column is-6 is-4-widescreen is-flex">
            <a class="card is-menu add-menu-card" href="{% url 'gestion:crear-menu' %}">
              <span>+</span>
            </a>
          </div>
          {% endif%}
        </div>
      {% else %}
        <h2 class="title is-5">Aún no has creado ningún menú</h2>
      {% endif %}
    </section>
  </div>
{% endblock %}
